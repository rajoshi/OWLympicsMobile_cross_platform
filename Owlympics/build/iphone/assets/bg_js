function distance(e,t,a,i){var r=Math.PI*e/180,n=Math.PI*a/180,o=(Math.PI*t/180,Math.PI*i/180,t-i),l=Math.PI*o/180,c=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos(l);return c=Math.acos(c),c=180*c/Math.PI,c=60*c*1.1515,c=1.609344*c*1e3}function checkFeed(){Ti.API.info("hi, I m alive")}var count=0,centerRadius=10,coords=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"coords.txt"),enterfile=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"enterflag.txt"),stampfile=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"stamp.txt"),enterflag=new Array,stamp=new Array;for(i=0;i<enterfile.read().length-1;i++)enterflag[i]=parseFloat(enterfile.read().text.split(",")[i]),stamp[i]=parseFloat(stampfile.read().text.split(",")[i]);Ti.Geolocation.purpose="Smart Reminders";var hour,min;Ti.Geolocation.locationServicesEnabled?(Ti.Geolocation.accuracy=Ti.Geolocation.ACCURACY_HUNDRED_METERS,Ti.Geolocation.distanceFilter=5,Ti.Geolocation.preferredProvider=Ti.Geolocation.PROVIDER_PROVIDER_NETWORK,Ti.Geolocation.addEventListener("location",function(e){if(e.error);else{var t=0;if(i=0,t=distance(e.coords.latitude,e.coords.longitude,parseFloat(coords.read().text.split(",")[2*i]),parseFloat(coords.read().text.split(",")[2*i+1])),centerRadius>t)enterflag[i]||(enterflag[i]=1,stamp[i]=e.coords.timestamp);else if(enterflag[i]){var a=new Date;if(enterflag[i]=0,hour=Math.floor((e.coords.timestamp-stamp[i])/36e5),min=Math.floor((e.coords.timestamp-stamp[i])/6e4)-6e4*hour,hour>1){Ti.App.iOS.scheduleLocalNotification({alertBody:a.getHours()+":"+a.getMinutes()+"|Report your activities for "+hour+"hours and "+min+" mins? Distance ="+t,alertAction:"Re-Launch!",userInfo:{hello:"world"},sound:"pop.caf",date:new Date((new Date).getTime()),hasAction:!0})}else{Ti.App.iOS.scheduleLocalNotification({alertBody:a.getHours()+":"+a.getMinutes()+"|Report your activities for "+min+" mins? Distance ="+t,alertAction:"Re-Launch!",userInfo:{hello:"world"},sound:"pop.caf",date:new Date((new Date).getTime()),hasAction:!0})}}}Ti.App.fireEvent("Gvariables",{enterflag:enterflag,stamp:stamp})})):alert("Please enable location services");var timer1=setInterval(checkFeed,599e3);