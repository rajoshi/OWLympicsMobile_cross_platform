function distance(e,t,a,i){var r=Math.PI*e/180,n=Math.PI*a/180,o=(Math.PI*t/180,Math.PI*i/180,t-i),l=Math.PI*o/180,c=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos(l);return c=Math.acos(c),c=180*c/Math.PI,c=60*c*1.1515,c=1.609344*c*1e3}function checkFeed(){Ti.API.info("hi, I m alive")}var pointlat=new Array,pointlong=new Array,accur=new Array,count=0,centerRadius=20,coords=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"coords.txt"),enterfile=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"enterflag.txt"),stayfile=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"stayflag.txt"),stampfile=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"stamp.txt"),points=new Array;for(i=0;i<coords.read().text.split(",").length;i++)points[i]=parseFloat(coords.read().text.split(",")[i]);Ti.Geolocation.purpose="Smart Reminders";var hour,min;Ti.Geolocation.locationServicesEnabled?(Ti.Geolocation.accuracy=Ti.Geolocation.ACCURACY_HUNDRED_METERS,Ti.Geolocation.distanceFilter=5,Ti.Geolocation.preferredProvider=Ti.Geolocation.PROVIDER_PROVIDER_NETWORK,Ti.Geolocation.addEventListener("location",function(e){if(e.error);else{var t=new Array,a=new Array,r=new Array,n=0;for(i=0;i<enterfile.read().length-1;i++)if(t[i]=parseFloat(enterfile.read().text.split(",")[i]),a[i]=parseFloat(stayfile.read().text.split(",")[i]),r[i]=parseFloat(stampfile.read().text.split(",")[i]),n=distance(e.coords.latitude,e.coords.longitude,points[2*i],points[2*i+1]),centerRadius>n)t[i]?e.coords.timestamp-r[i]>1e3&&(a[i]=1):(t[i]=1,r[i]=e.coords.timestamp);else if(t[i]){{new Date}if(t[i]=0,a[i]){hour=Math.floor((e.coords.timestamp-r[i])/36e5),min=Math.floor((e.coords.timestamp-r[i])/6e4)-6e4*hour,alert("blah"+count);{Ti.App.iOS.scheduleLocalNotification({alertBody:"Report your activities?",alertAction:"Re-Launch!",userInfo:{hello:"world"},sound:"pop.caf",date:new Date((new Date).getTime()),hasAction:!0})}a[i]=0}}for(enterfile.deleteFile(),enterfile.createFile(),stayfile.deleteFile(),stayfile.createFile(),stampfile.deleteFile(),stampfile.createFile(),i=0;i<t.length;i++)enterfile.write(t[i]+",",!0),stampfile.write(r[i]+",",!0),stayfile.write(a[i]+",",!0);pointlat[count]=e.coords.latitude,pointlong[count]=e.coords.longitude,accur[count]=n,Ti.App.fireEvent("Gvariables",{blahlat:pointlat,blahlong:pointlong,length:count,accuracy:accur}),count+=1;{Ti.App.iOS.scheduleLocalNotification({alertAction:"Re-Launch!",userInfo:{hello:"world"},date:new Date((new Date).getTime())})}}})):alert("Please enable location services");var timer1=setInterval(checkFeed,599e3);