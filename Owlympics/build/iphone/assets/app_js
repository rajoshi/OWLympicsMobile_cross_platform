Ti.version<1.8&&alert("Sorry - this application template requires Titanium Mobile SDK 1.8 or later"),Titanium.UI.setBackgroundColor("#000"),function(){function e(){W.value="0",C.value="0",O.value="0",M.value="0",B.value="",X=new Date,St=X.getDate(),Et=X.getMonth()+1,Lt=X.getFullYear(),a=X.getFullYear(),b=X.getMonth(),c=X.getDate(),xt="",f=3,I=3,k.backgroundImage="./images/goldstar.png",T.backgroundImage="./images/goldstar.png",w.backgroundImage="./images/goldstar.png",v.backgroundImage="./images/dullstar.png",U.backgroundImage="./images/dullstar.png",ot.backgroundImage="./images/goldstar.png",gt.backgroundImage="./images/goldstar.png",dt.backgroundImage="./images/goldstar.png",ct.backgroundImage="./images/dullstar.png",lt.backgroundImage="./images/dullstar.png"}function t(){if(Titanium.Network.networkType===Titanium.Network.NETWORK_NONE)alert("Could not submit, Please check internet connection.");else{""==C.value&&(C.value="0"),""==O.value&&(O.value="0"),""==M.value&&(M.value="0");var e=Titanium.UI.createAlertDialog({title:"Submit Data",message:"Submit the following information? \nDate : "+Et+"-"+St+"-"+Lt+"\nActivity : "+xt+" \nLow Intensity : "+C.value+" \nMed Intensity : "+O.value+" \nHigh Intensity : "+M.value+"\nNumber of Participants : "+W.value+"\nExercise rating : "+f+"\nHapiness rating : "+I,buttonNames:["Yes","No"],cancel:1});if(""!=xt&&C.value+O.value+M.value>0){var t={day:St.toString(),mon:Et.toString(),year:Lt.toString(),activity:xt,social:W.value,lowintensity:C.value,moderateintensity:O.value,highintensity:M.value,note:"",rate:"1",hour:X.getHours().toString(),min:X.getMinutes().toString(),sec:X.getSeconds().toString(),happy:I.toString(),activeness:f.toString(),uuid:Titanium.Platform.id};e.show()}else alert("Please fill all fields. Time cannot be zero.");e.addEventListener("click",function(e){if(Titanium.API.info("e = "+JSON.stringify(e)),e.cancel!==e.index&&e.cancel!==!0)switch(e.index){case 0:Titanium.API.info("Clicked button 0 (YES)"),Pt.send(t);break;case 1:Titanium.API.info("Clicked button 1 (NO)")}})}}function n(){Dt.open("POST","http://owlympics.ecg.rice.edu:81/mobile/profile");var e={uuid:Titanium.Platform.id};Dt.send(e)}var r=(Ti.Platform.osname,Ti.Platform.version,Ti.Platform.displayCaps.platformHeight),o=Ti.Platform.displayCaps.platformWidth,g=Titanium.UI.createWindow({title:"OWLympics",backgroundImage:"./images/thisbackground.jpg",orientationModes:[Titanium.UI.PORTRAIT]}),d=Titanium.UI.createView({height:"100%",width:"100%",top:0,left:0}),l=Ti.Platform.displayCaps.platformHeight,u=Ti.Platform.displayCaps.platformWidth;"android"===Ti.Platform.osname&&(o>899||r>999)&&(l/=2,u/=2,Ti.info("Its a Tablet"));var s=Ti.UI.createView({height:2.5*l,width:u,top:0,left:0}),m=Ti.UI.createScrollView({contentWidth:"auto",contentHeight:2.5*l,showVerticalScrollIndicator:!0,showHorizontalScrollIndicator:!1,height:"100%",width:"100%"});m.add(s);var p=Titanium.UI.createScrollableView({views:[d,m],showPagingControl:!0});g.add(p);var h=Ti.UI.createLabel({text:"How active did you feel?",color:"white",font:{fontSize:16},top:"5%",left:"10%"});s.add(h);var f,I,k=Ti.UI.createButton({top:"7%",left:"3%",color:"white",width:55,height:55,backgroundImage:"./images/goldstar.png"});k.addEventListener("click",function(){k.backgroundImage="./images/goldstar.png",T.backgroundImage="./images/dullstar.png",w.backgroundImage="./images/dullstar.png",v.backgroundImage="./images/dullstar.png",U.backgroundImage="./images/dullstar.png",f=1});var T=Ti.UI.createButton({top:"7%",left:"22%",color:"white",width:55,height:55,backgroundImage:"./images/goldstar.png"});T.addEventListener("click",function(){k.backgroundImage="./images/goldstar.png",T.backgroundImage="./images/goldstar.png",w.backgroundImage="./images/dullstar.png",v.backgroundImage="./images/dullstar.png",U.backgroundImage="./images/dullstar.png",f=2});var w=Ti.UI.createButton({top:"7%",left:"41%",color:"white",width:55,height:55,backgroundImage:"./images/goldstar.png"});w.addEventListener("click",function(){k.backgroundImage="./images/goldstar.png",T.backgroundImage="./images/goldstar.png",w.backgroundImage="./images/goldstar.png",v.backgroundImage="./images/dullstar.png",U.backgroundImage="./images/dullstar.png",f=3});var v=Ti.UI.createButton({top:"7%",left:"60%",color:"white",width:55,height:55,backgroundImage:"./images/dullstar.png"});v.addEventListener("click",function(){k.backgroundImage="./images/goldstar.png",T.backgroundImage="./images/goldstar.png",w.backgroundImage="./images/goldstar.png",v.backgroundImage="./images/goldstar.png",U.backgroundImage="./images/dullstar.png",f=4});var U=Ti.UI.createButton({top:"7%",left:"79%",color:"white",width:55,height:55,backgroundImage:"./images/dullstar.png"});U.addEventListener("click",function(){k.backgroundImage="./images/goldstar.png",T.backgroundImage="./images/goldstar.png",w.backgroundImage="./images/goldstar.png",v.backgroundImage="./images/goldstar.png",U.backgroundImage="./images/goldstar.png",f=5}),s.add(k),s.add(T),s.add(w),s.add(v),s.add(U);var y=Ti.UI.createLabel({text:"Which exercise did you do?",color:"white",font:{fontSize:16},top:"13%",left:"10%"});s.add(y);var S=Ti.UI.createButton({title:"Run",color:"white",font:{fontSize:16},top:"15%",left:"10%",width:75,height:75,backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(S);var E=Ti.UI.createButton({title:"Walk",color:"white",font:{fontSize:16},top:"15%",left:"36%",width:75,height:75,backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(E);var L=Ti.UI.createButton({title:"Swim",color:"white",font:{fontSize:16},top:"15%",left:"62%",width:75,height:75,backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(L);var x=Ti.UI.createButton({title:"Cycle",color:"white",font:{fontSize:16},top:"21%",left:"20%",width:75,height:75,backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(x);var P=Ti.UI.createButton({title:"Weights",color:"white",font:{fontSize:16},top:"21%",left:"52%",width:75,height:75,backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(P);var D=Ti.UI.createButton({title:"Enter",color:"white",font:{fontSize:16},top:"27%",left:"67%",width:75,height:75,backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(D);var B=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",font:{fontSize:16},top:"28%",left:"15%",width:160,height:65,backgroundColor:"white"});s.add(B);var A=Ti.UI.createLabel({text:"How long did you exercise? (in minutes)",color:"white",font:{fontSize:16},top:"34%",left:"15%"});s.add(A);var z=Ti.UI.createLabel({text:"LOW",color:"white",font:{fontSize:16},top:"37%",left:"20%"});s.add(z);var N=Ti.UI.createLabel({text:"MED",color:"white",font:{fontSize:16},top:"37%",left:"45%"});s.add(N);var R=Ti.UI.createLabel({text:"HIGH",color:"white",font:{fontSize:16},top:"37%",left:"70%"});s.add(R);var C=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",font:{fontSize:16},top:"39%",left:"15%",width:75,height:60,backgroundColor:"white",keyboardType:Titanium.UI.KEYBOARD_NUMBER_PAD});s.add(C);var O=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",font:{fontSize:20},top:"39%",left:"42%",width:75,height:60,backgroundColor:"white",keyboardType:Titanium.UI.KEYBOARD_NUMBER_PAD});s.add(O);var M=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",font:{fontSize:16},top:"39%",left:"67%",width:75,height:60,backgroundColor:"white",keyboardType:Titanium.UI.KEYBOARD_NUMBER_PAD});s.add(M);var _=Ti.UI.createLabel({text:"Number of participants",color:"white",font:{fontSize:16},top:"46%",left:"15%"});s.add(_);var W=Ti.UI.createTextField({borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,color:"black",font:{fontSize:16},top:"45%",left:"70%",width:75,height:60,backgroundColor:"white",keyboardType:Titanium.UI.KEYBOARD_NUMBER_PAD,text:"0"});s.add(W);var Y=Ti.UI.createButton({title:"Today",color:"white",font:{fontSize:16,fontFamily:"Helvetica Neue"},top:"50%",left:"35%",width:110,height:55,backgroundImage:"./images/greenrect.png",backgroundSelectedImage:"./images/grayrect.png"});s.add(Y);var V=Ti.UI.createButton({title:"Yesterday",color:"white",top:"54%",left:"35%",width:110,height:55,backgroundImage:"./images/greenrect.png"});s.add(V);var H=u,F=Ti.UI.createView({top:"59%",width:u,height:330});s.add(F);var K=Ti.UI.createButton({left:"25dp",width:40,height:40,title:"<"}),Z=Ti.UI.createButton({right:"25dp",width:40,height:40,title:">"}),J=Ti.UI.createLabel({width:"200dp",height:"24dp",textAlign:"center",color:"#000000",font:{fontSize:16,fontWeight:"bold"}}),q=Ti.UI.createView({top:"0dp",width:"322dp",height:"50dp",backgroundColor:"#00cc66",layout:"vertical"}),j=Ti.UI.createView({top:"3dp",width:"322dp",height:"24dp"});j.add(K),j.add(J),j.add(Z);var G=Ti.UI.createView({top:"2dp",width:"322dp",height:"22dp",layout:"horizontal"});G.sunday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Sun",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.monday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Mon",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.tuesday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Tue",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.wednesday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Wed",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.thursday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Thu",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.friday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Fri",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.saturday=Ti.UI.createLabel({left:"0dp",height:"20dp",text:"Sat",width:"46dp",textAlign:"center",font:{fontSize:12,fontWeight:"bold"},color:"#3a4756"}),G.add(G.monday),G.add(G.tuesday),G.add(G.wednesday),G.add(G.thursday),G.add(G.friday),G.add(G.saturday),G.add(G.sunday),q.add(j),q.add(G),dayView=function(e){var t=Ti.UI.createLabel({current:e.current,width:"46dp",height:"44dp",backgroundColor:"#DCDCDF",text:e.day,textAlign:"center",color:e.color,font:{fontSize:16,fontWeight:"bold"}});return t},monthName=function(e){switch(e){case 0:e="January";break;case 1:e="February";break;case 2:e="March";break;case 3:e="April";break;case 4:e="May";break;case 5:e="June";break;case 6:e="July";break;case 7:e="August";break;case 8:e="September";break;case 9:e="October";break;case 10:e="November";break;case 11:e="December"}return e};var Q=function(e,t,a){var n=(monthName(t),Ti.UI.createView({layout:"horizontal",width:u,height:"100%",left:"10%",top:"50dp"})),r=32-new Date(e,t,32).getDate(),o=new Date(e,t,a).getDate(),g=new Date(e,t,1).getDay(),d=32-new Date(e,t-1,32).getDate(),c=new Date(e,t,r).getDay()-6,l=d-g+1;for(i=0;g>i;i++)n.add(new dayView({day:l,color:"#8e959f",current:"no",dayOfMonth:""})),l++;for(l=1,i=0;r>i;i++){var s=new dayView({day:l,color:"#3a4756",current:"yes",dayOfMonth:o});if(n.add(s),s.text==o){s.color="white",s.backgroundColor="#00cc66";var m=s}i+1>o&&(s.color="#8e959f"),l++}for(l=1,i=0;i>c;i--)n.add(new dayView({day:l,color:"#8e959f",current:"no",dayOfMonth:""})),l++;return n.addEventListener("click",function(i){V.backgroundImage="./images/greenrect.png",Y.backgroundImage="./images/greenrect.png","yes"==i.source.current&&(m.text==o?(m.color="white",m.backgroundColor="#00cc66"):m.text<o&&(m.color="#3a4756",m.backgroundColor="#DCDCDF"),m.backgroundPaddingLeft="0dp",m.backgroundPaddingBottom="0dp",i.source.text==o?(i.source.backgroundColor="#333333",St=a,Et=t+1,Lt=e):i.source.text<o&&(i.source.backgroundColor="#333333",St=i.source.text,Et=t+1,Lt=e),i.source.backgroundPaddingLeft="1dp",i.source.backgroundPaddingBottom="1dp",i.source.text<=o&&(i.source.color="white"),m=i.source)}),n},X=new Date;a=X.getFullYear(),b=X.getMonth(),c=X.getDate();var $=null;$=0==b?Q(a-1,11,c):Q(a,b-1,c),$.left=-1*H+"dp";var et=null;et=0==b?Q(a+1,0,c):Q(a,b+1,c),et.left=H+"dp";var tt=Q(a,b,c);tt.left="-1dp",J.text=monthName(b)+" "+a,F.add(q),F.add(tt),F.add(et),F.add($);var at=Titanium.UI.createAnimation({duration:500});at.left=-1*H;var it=Titanium.UI.createAnimation({duration:500});it.left="-1";var nt=Titanium.UI.createAnimation({duration:500});nt.left=H;var rt=0;Z.addEventListener("click",function(){1==rt&&(11==b?(b=0,a++):b++,tt.animate(at),et.animate(it),setTimeout(function(){tt.left=-1*H+"dp",et.left="-1dp",$=tt,tt=et,et=11==b?Q(a+1,0,c):Q(a,b+1,c),J.text=monthName(b)+" "+a,et.left=H+"dp",F.add(et)},500),rt=0)}),K.addEventListener("click",function(){var e=new Date;e.setDate(X.getDate()-7),e.getMonth()!=b&&0==rt&&(0==b?(b=11,a--):b--,tt.animate(nt),$.animate(it),setTimeout(function(){tt.left=H+"dp",$.left="-1dp",et=tt,tt=$,$=0==b?Q(a-1,11,c):Q(a,b-1,c),J.text=monthName(b)+" "+a,$.left=-1*H+"dp",F.add($)},500),rt=1)});var h=Ti.UI.createLabel({text:"How happy did you feel?",color:"white",font:{fontSize:16},top:"82%",left:"10%"});s.add(h);var ot=Ti.UI.createButton({top:"85%",left:"3%",color:"white",width:55,height:55,backgroundImage:"./images/goldstar.png"});ot.addEventListener("click",function(){ot.backgroundImage="./images/goldstar.png",gt.backgroundImage="./images/dullstar.png",dt.backgroundImage="./images/dullstar.png",ct.backgroundImage="./images/dullstar.png",lt.backgroundImage="./images/dullstar.png",I=1});var gt=Ti.UI.createButton({top:"85%",left:"22%",color:"white",width:55,height:55,backgroundImage:"./images/goldstar.png"});gt.addEventListener("click",function(){ot.backgroundImage="./images/goldstar.png",gt.backgroundImage="./images/goldstar.png",dt.backgroundImage="./images/dullstar.png",ct.backgroundImage="./images/dullstar.png",lt.backgroundImage="./images/dullstar.png",I=2});var dt=Ti.UI.createButton({top:"85%",left:"41%",color:"white",width:55,height:55,backgroundImage:"./images/goldstar.png"});dt.addEventListener("click",function(){ot.backgroundImage="./images/goldstar.png",gt.backgroundImage="./images/goldstar.png",dt.backgroundImage="./images/goldstar.png",ct.backgroundImage="./images/dullstar.png",lt.backgroundImage="./images/dullstar.png",I=3});var ct=Ti.UI.createButton({top:"85%",left:"60%",color:"white",width:55,height:55,backgroundImage:"./images/dullstar.png"});ct.addEventListener("click",function(){ot.backgroundImage="./images/goldstar.png",gt.backgroundImage="./images/goldstar.png",dt.backgroundImage="./images/goldstar.png",ct.backgroundImage="./images/goldstar.png",lt.backgroundImage="./images/dullstar.png",I=4});var lt=Ti.UI.createButton({top:"85%",left:"79%",color:"white",width:55,height:55,backgroundImage:"./images/dullstar.png"});lt.addEventListener("click",function(){ot.backgroundImage="./images/goldstar.png",gt.backgroundImage="./images/goldstar.png",dt.backgroundImage="./images/goldstar.png",ct.backgroundImage="./images/goldstar.png",lt.backgroundImage="./images/goldstar.png",I=5}),s.add(ot),s.add(gt),s.add(dt),s.add(ct),s.add(lt);var ut=Ti.UI.createButton({top:"91%",left:"70%",color:"white",font:{fontSize:16},width:80,height:80,title:"Submit",backgroundImage:"./images/green.png",backgroundSelectedImage:"./images/gray.png"});s.add(ut);var st=Ti.UI.createTextField({height:"40dp",width:"150dp",top:"10%",left:"40%",color:"white",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,keyboardType:Titanium.UI.KEYBOARD_EMAIL}),mt=Ti.UI.createTextField({height:"40dp",width:"150dp",top:"30%",left:"40%",color:"white",borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,passwordMask:"True"}),pt=Ti.UI.createLabel({color:"white",font:{fontSize:16},text:"Current Level:",top:"10%",left:"50%",width:Ti.UI.SIZE,height:Ti.UI.SIZE}),ht=Ti.UI.createView({top:"15%",left:"40%",width:180,height:"2%",backgroundColor:"red"}),bt=Ti.UI.createView({top:"0",left:"0",width:"5%",height:"100%",backgroundColor:"green"});ht.add(bt),d.add(ht);var ft=Ti.UI.createLabel({color:"white",font:{fontSize:16},text:"Points Earned:",top:"18%",left:"50%",width:Ti.UI.SIZE,height:Ti.UI.SIZE});d.add(pt),d.add(ft);var It=Ti.UI.createLabel({color:"white",font:{fontSize:16},text:"Recent Activities:",top:"10%",left:"10%",width:Ti.UI.SIZE,height:Ti.UI.SIZE});d.add(It);var kt=Ti.UI.createButton({top:"70%",left:"15%",color:"white",width:100,title:"Refresh",backgroundImage:"./images/greenrect.png",backgroundImageSelected:"./images/grayrect.png"});d.add(kt);var Tt=Ti.UI.createButton({top:"70%",left:"48%",color:"white",width:110,title:"Log out",backgroundImage:"./images/greenrect.png",backgroundImageSelected:"./images/grayrect.png"}),wt=Ti.UI.createLabel({color:"white",font:{fontSize:20},text:"Username",top:"10%",left:"10%",width:Ti.UI.SIZE,height:Ti.UI.SIZE}),vt=Ti.UI.createLabel({color:"white",font:{fontSize:20},text:"Password",top:"30%",left:"10%",width:Ti.UI.SIZE,height:Ti.UI.SIZE}),Ut=Titanium.UI.createWindow({title:"Register Phone",backgroundColor:"black",backgroundRepeat:!0});Ut.add(wt),Ut.add(vt),Ut.add(mt),Ut.add(st);var yt=Ti.UI.createButton({top:"40%",title:"Register"});Ut.add(yt);var St,Et,Lt,xt;e(),Y.addEventListener("click",function(){Y.backgroundImage="./images/grayrect.png",V.backgroundImage="./images/greenrect.png",St=X.getDate(),Et=X.getMonth()+1,Lt=X.getFullYear()}),V.addEventListener("click",function(){V.backgroundImage="./images/grayrect.png",Y.backgroundImage="./images/greenrect.png";var e=new Date;e.setDate(X.getDate()-1),St=e.getDate(),Et=e.getMonth()+1,Lt=e.getFullYear()}),S.addEventListener("click",function(){xt="Running",S.backgroundImage="./images/gray.png",E.backgroundImage="./images/green.png",L.backgroundImage="./images/green.png",x.backgroundImage="./images/green.png",P.backgroundImage="./images/green.png",D.backgroundImage="./images/green.png"}),E.addEventListener("click",function(){xt="Walking",S.backgroundImage="./images/green.png",E.backgroundImage="./images/gray.png",L.backgroundImage="./images/green.png",x.backgroundImage="./images/green.png",P.backgroundImage="./images/green.png",D.backgroundImage="./images/green.png"}),L.addEventListener("click",function(){xt="Swimming",S.backgroundImage="./images/green.png",E.backgroundImage="./images/green.png",L.backgroundImage="./images/gray.png",x.backgroundImage="./images/green.png",P.backgroundImage="./images/green.png",D.backgroundImage="./images/green.png"}),x.addEventListener("click",function(){xt="Cycling",S.backgroundImage="./images/green.png",E.backgroundImage="./images/green.png",L.backgroundImage="./images/green.png",x.backgroundImage="./images/gray.png",P.backgroundImage="./images/green.png",D.backgroundImage="./images/green.png"}),P.addEventListener("click",function(){xt="Weights",S.backgroundImage="./images/green.png",E.backgroundImage="./images/green.png",L.backgroundImage="./images/green.png",x.backgroundImage="./images/green.png",P.backgroundImage="./images/gray.png",D.backgroundImage="./images/green.png"}),D.addEventListener("click",function(){""==B.value?alert("Please type the exercise or click on the options above"):(xt=B.value,B.blur(),S.backgroundImage="./images/green.png",E.backgroundImage="./images/green.png",L.backgroundImage="./images/green.png",x.backgroundImage="./images/green.png",P.backgroundImage="./images/green.png",D.backgroundImage="./images/gray.png")}),C.addEventListener("return",function(){"android"==Titanium.Platform.name?Ti.UI.Android.hideSoftKeyboard():C.blur()}),O.addEventListener("return",function(){"android"==Titanium.Platform.name?Ti.UI.Android.hideSoftKeyboard():O.blur()}),M.addEventListener("return",function(){"android"==Titanium.Platform.name?Ti.UI.Android.hideSoftKeyboard():M.blur()}),B.addEventListener("return",function(){"android"==Titanium.Platform.name&&Ti.UI.Android.hideSoftKeyboard(),B.blur()}),W.addEventListener("return",function(){"android"==Titanium.Platform.name?Ti.UI.Android.hideSoftKeyboard():W.blur()}),B.addEventListener("singletap",function(){B.value=""}),C.addEventListener("singletap",function(){C.value=""}),O.addEventListener("singletap",function(){O.value=""}),M.addEventListener("singletap",function(){M.value=""}),W.addEventListener("singletap",function(){W.value=""});var Pt=Titanium.Network.createHTTPClient();ut.addEventListener("click",function(){Pt=Titanium.Network.createHTTPClient(),Pt.open("POST","http://owlympics.ecg.rice.edu:81/mobile/submit"),t(),Pt.onload=function(){alert(this.responseText),"Activity submission succeeded"==this.responseText?(alert("Congratulations! Your hardwork earned you "+Math.floor(100*(C.value/45+O.value/30+M.value/20)+10*(W.value>0))+" points!"),n(),p.scrollToView(d),e()):alert(this.responseText)}});var Dt=Titanium.Network.createHTTPClient();Dt.onload=function(){alert(this.responseText);for(var e in d.children)d.children.hasOwnProperty(e)&&d.remove(d.children[e]);d.add(kt),d.add(Tt),d.add(kt),ht.add(bt),d.add(ht),d.add(pt),d.add(ft),d.add(It);var t=JSON.parse(this.responseText);for(userPoints=t[0].points,bt.width=180*userPoints/400,userLevel="Current Level: ",userLevel+=t[0].level,i=0;i<t[0].acts.length;i++){var a=Ti.UI.createLabel({color:"white",font:{fontSize:16},text:"Exercise",top:170+20*i,left:"10%",width:Ti.UI.SIZE,height:Ti.UI.SIZE});d.add(a);var n="";n=n+t[0].acts[i].name+" for "+t[0].acts[i].newpoints+" points on "+t[0].acts[i].month+"/"+t[0].acts[i].day+"/"+t[0].acts[i].year,a.setText(n)}pt.setText(userLevel),point="Points Earned : "+userPoints,ft.setText(point)},Ti.App.Properties.hasProperty("loggedBefore"),kt.addEventListener("click",function(){n()});var Bt=Titanium.Network.createHTTPClient();Bt.onload=function(){"Deauthorization succeeded"==this.responseText?(alert("Phone successfully deauthorized."),Ti.App.Properties.removeProperty("loggedBefore"),Ut.open(),g.close()):alert(this.responseText)},Tt.addEventListener("click",function(){Bt.open("POST","http://owlympics.ecg.rice.edu:81/mobile/detach");var e={uuid:Titanium.Platform.id};Bt.send(e)}),d.add(Tt);var At=Titanium.Network.createHTTPClient();At.onload=function(){"Authentication succeeded"==this.responseText?(alert("Account successfully registered."),g.open(),p.scrollToView(m),Ut.close(),"android"==Titanium.Platform.name&&Ti.UI.Android.hideSoftKeyboard(),Ti.App.Properties.setInt("loggedBefore",1)):alert(this.responseText)},yt.addEventListener("click",function(){if(""!=st.value&&""!=mt.value){At.open("POST","http://owlympics.ecg.rice.edu:81/mobile/register");var e={username:st.value,password:mt.value,uuid:Titanium.Platform.id};At.send(e)}else alert("Username/Password are required")}),g.open(),p.scrollToView(m),"android"==Titanium.Platform.name&&Ti.UI.Android.hideSoftKeyboard(),p.addEventListener("doubletap",function(){"android"==Titanium.Platform.name?Ti.UI.Android.hideSoftKeyboard():(B.blur(),C.blur(),O.blur(),M.blur(),W.blur())})}();